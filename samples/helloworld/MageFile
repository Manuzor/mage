import mage;
import std.algorithm;
import std.array;

shared static this() {
  globalProperties.language = "cpp";
}

class Hello : Executable
{
  this()
  {
    this.name = "hello";
    this.sourceFiles = [
      "hello.cpp"
    ].map!(a => Path(a)).filter!(a => a.exists && a.isFile).array;
    //Properties compiler;
    //compiler.warningLevel = 4;
    //this.compiler = compiler;
  }
}

/*
class LibHello : Library
{
  this()
  {
    // Set the default library type.
    super(LibraryType.Static);
    name = "libhello";
    sourceFiles ~= [
      "hello.cpp"
    ].map!(a => Path(a)).filter!(a => a.isFile).array;
  }

  override void configure(in Properties context)
  {
    // If compiling with msvc, compile as dll.
    if(context.compiler == "msvc") {
      this.libType = LibraryType.Shared;
    }
  }
}
*/
